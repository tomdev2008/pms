M.Page.LogPricePage=M.createClass();M.extend(M.Page.LogPricePage.prototype,{context:{},temp_allroomtype:{},init:function(){this.initDOM();this.initEvent();this.temp_allroomtype=allroomtypelist;},initDOM:function(){this.context.formevent=$("#formevent");this.context.fromdate=$("#fromdate");this.context.enddate=$("#enddate");this.context.fromdate.datepicker({showOtherMonths:true,selectOtherMonths:true});this.context.enddate.datepicker({showOtherMonths:true,selectOtherMonths:true});},initEvent:function(){this.context.formevent.find('select[name=type]').bind('change',this.pricetype_change.toEventHandler(this));this.context.formevent.find('select[name=innid]').bind('change',this.innid_change.toEventHandler(this));},innid_change:function(e){var ele=M.EventEle(e);window.location.href="/log/logprice?innid="+ele.val();},pricetype_change:function(e){var ele=M.EventEle(e);var pricetype=ele.val();if(pricetype=='dx'||pricetype=='rt'){pricetype='yzg';}
var select_roomtype=this.context.formevent.find('select[name=rtid]');if(M.isEmpty(this.temp_allroomtype[pricetype])){select_roomtype.hide().children().empty();return false;}
select_roomtype.show();var roomtypelist=this.temp_allroomtype[pricetype];var tpl_option='<option value="0">所有房型</option>';for(var k in roomtypelist){var roomtype=roomtypelist[k];tpl_option+='<option value="'+roomtype.roomtypecode+'">'+roomtype.roomtypename+'</option>';}
select_roomtype.html(tpl_option);return true;},});var LogPricePage;M.ready(function(){LogPricePage=new M.Page.LogPricePage();return LogPricePage;});